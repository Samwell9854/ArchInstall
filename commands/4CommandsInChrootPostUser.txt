mkdir /etc/pacman.d/hooks
systemctl enable systemd-boot-update.service
# copy rest of files for /etc/pacman.d/hooks
vim /etc/mkinitcpio.conf
# add zfs to MODULES
# MODULES=(zfs)
# in HOOKS, add sd-zfs before filesystems; move keyboard hook before zfs; remove fsck (if not using ext3/ext4); replace udev with systemd; replace keymap and consolefont with sd-vconsole
zpool set bootfs=zroot/ROOT/default zroot
mkdir /etc/zfs/zfs-list.cache
touch /etc/zfs/zfs-list.cache/zroot
#ln -s /usr/lib/zfs/zed.d/history_event-zfs-list-cacher.sh /etc/zfs/zed.d  ## already there
systemctl enable zfs-import-cache.service
#systemctl enable zfs-mount.service
systemctl enable zfs-import.target
systemctl enable zfs-scrub-weekly@zroot.timer
systemctl enable zfs.target
systemctl enable zfs-zed.service
zgenhostid $(hostid)
mkinitcpio -p linux
bootctl --path=/boot install
# copy files /boot/loader/loader.conf & content of /boot/loader/entries
# copy files for /etc/systemd/network/
systemctl enable systemd-networkd.service
systemctl enable systemd-resolved.service
systemctl enable paccache.timer #does not exist??
pacman -S dhcpcd dosfstools gptfdisk htop inetutils linux-firmware logrotate lsof man man-pages nmap openssh pacman-contrib screen smartmontools strace sysfsutils usbutils wget xfsprogs
# select man-db
exit
